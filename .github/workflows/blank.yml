
name: Python Flask app with GitHubActions

on:
  push:
    branches: 
      -  githubactions-staging

# Define the jobs
jobs:
  build:
    name: Build Stage
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Build Application
        run: |
          echo "========================================="
          echo "Starting Build Stage..."
          echo "========================================="
          echo "Installing dependencies..."
          echo "Compiling source code..."
          echo "Build completed successfully!"
          echo "========================================="
  
  test:
    name: Test Stage
    runs-on: ubuntu-latest
    needs: build  # This job runs only after build succeeds
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Run Tests
        run: |
          echo "========================================="
          echo "Starting Test Stage..."
          echo "========================================="
          echo "Running unit tests..."
          echo "Running integration tests..."
          echo "All tests passed successfully!"
          echo "========================================="
  
  deploy:
    name: Deploy Stage
    runs-on: ubuntu-latest
    needs: test  # This job runs only after test succeeds
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Deploy to Staging
        run: |
          echo "========================================="
          echo "Starting Deployment Stage..."
          echo "========================================="
          echo "Deploying to staging environment..."
          echo "Branch: githubactions-staging"
          echo "Deployment completed successfully!"
          echo "========================================="
